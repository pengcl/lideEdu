"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
Page({
    data: {
        codeUrl: '',
        server: {}
    },
    onShow: function () {
        var that = this;
        app.getKey(function (userInfo) {
            if (!userInfo) {
                app.globalData.showLoginPanel = true;
            }
            else {
                wx.request({
                    url: app.globalData.prefix + 'getService',
                    method: 'POST',
                    data: { key: app.globalData.userInfo.key, id: app.globalData.userInfo.serviceId },
                    success: function (res) {
                        console.log(res);
                        that.setData({
                            codeUrl: app.globalData.filePrefix + res.data.result.fileId,
                            server: res.data.result
                        });
                        console.log(that.data);
                    }
                });
            }
        });
    },
    previewImage: function () {
        console.log('previewImage');
        wx.previewImage({
            current: this.data.codeUrl,
            urls: [this.data.codeUrl]
        });
    },
    makeCall: function () {
        wx.makePhoneCall({ phoneNumber: this.data.server.mobile });
    },
    onShareAppMessage: function () {
        app.updateShare();
        return {
            title: '教育成就美好未来',
            path: '/pages/service/service'
        };
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSxJQUFNLEdBQUcsR0FBRyxNQUFNLEVBQVUsQ0FBQTtBQUM1QixJQUFJLENBQUM7SUFDSCxJQUFJLEVBQUU7UUFDSixPQUFPLEVBQUUsRUFBRTtRQUNYLE1BQU0sRUFBRSxFQUFFO0tBQ1g7SUFDRCxNQUFNO1FBQ0osSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLEdBQUcsQ0FBQyxNQUFNLENBQUMsVUFBQyxRQUFhO1lBQ3ZCLElBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQ2IsR0FBRyxDQUFDLFVBQVUsQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO2FBQ3RDO2lCQUFNO2dCQUNMLEVBQUUsQ0FBQyxPQUFPLENBQUM7b0JBQ1QsR0FBRyxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLFlBQVk7b0JBQ3pDLE1BQU0sRUFBRSxNQUFNO29CQUNkLElBQUksRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRTtvQkFDakYsT0FBTyxZQUFDLEdBQVE7d0JBQ2QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQzt3QkFDakIsSUFBSSxDQUFDLE9BQVEsQ0FBQzs0QkFDWixPQUFPLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTTs0QkFDM0QsTUFBTSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTTt5QkFDeEIsQ0FBQyxDQUFBO3dCQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUN6QixDQUFDO2lCQUNGLENBQUMsQ0FBQzthQUNKO1FBQ0gsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBQ0QsWUFBWTtRQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDNUIsRUFBRSxDQUFDLFlBQVksQ0FBQztZQUNkLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU87WUFDMUIsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7U0FDMUIsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUNELFFBQVE7UUFDTixFQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUNELGlCQUFpQjtRQUNmLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNsQixPQUFPO1lBQ0wsS0FBSyxFQUFFLFVBQVU7WUFDakIsSUFBSSxFQUFFLHdCQUF3QjtTQUMvQixDQUFBO0lBQ0gsQ0FBQztDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElNeUFwcCB9IGZyb20gJy4uLy4uL2FwcCc7XG5pbXBvcnQgeyBnZXRJbmRleCwgZm9ybWF0VGltZSB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xuY29uc3QgYXBwID0gZ2V0QXBwPElNeUFwcD4oKVxuUGFnZSh7XG4gIGRhdGE6IHtcbiAgICBjb2RlVXJsOiAnJyxcbiAgICBzZXJ2ZXI6IHt9XG4gIH0sXG4gIG9uU2hvdygpIHtcbiAgICBjb25zdCB0aGF0ID0gdGhpcztcbiAgICBhcHAuZ2V0S2V5KCh1c2VySW5mbzogYW55KSA9PiB7XG4gICAgICBpZiAoIXVzZXJJbmZvKSB7XG4gICAgICAgIGFwcC5nbG9iYWxEYXRhLnNob3dMb2dpblBhbmVsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHd4LnJlcXVlc3Qoe1xuICAgICAgICAgIHVybDogYXBwLmdsb2JhbERhdGEucHJlZml4ICsgJ2dldFNlcnZpY2UnLCAvL+iAg+WJjei1hOaWmeWIl+ihqFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGRhdGE6IHsga2V5OiBhcHAuZ2xvYmFsRGF0YS51c2VySW5mby5rZXksIGlkOiBhcHAuZ2xvYmFsRGF0YS51c2VySW5mby5zZXJ2aWNlSWQgfSxcbiAgICAgICAgICBzdWNjZXNzKHJlczogYW55KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgICAgdGhhdC5zZXREYXRhISh7XG4gICAgICAgICAgICAgIGNvZGVVcmw6IGFwcC5nbG9iYWxEYXRhLmZpbGVQcmVmaXggKyByZXMuZGF0YS5yZXN1bHQuZmlsZUlkLFxuICAgICAgICAgICAgICBzZXJ2ZXI6IHJlcy5kYXRhLnJlc3VsdFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoYXQuZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuICBwcmV2aWV3SW1hZ2UoKSB7XG4gICAgY29uc29sZS5sb2coJ3ByZXZpZXdJbWFnZScpO1xuICAgIHd4LnByZXZpZXdJbWFnZSh7XG4gICAgICBjdXJyZW50OiB0aGlzLmRhdGEuY29kZVVybCwgLy8g5b2T5YmN5pi+56S65Zu+54mH55qEaHR0cOmTvuaOpVxuICAgICAgdXJsczogW3RoaXMuZGF0YS5jb2RlVXJsXSAvLyDpnIDopoHpooTop4jnmoTlm77niYdodHRw6ZO+5o6l5YiX6KGoXG4gICAgfSlcbiAgfSxcbiAgbWFrZUNhbGwoKSB7XG4gICAgd3gubWFrZVBob25lQ2FsbCh7IHBob25lTnVtYmVyOiB0aGlzLmRhdGEuc2VydmVyLm1vYmlsZSB9KTtcbiAgfSxcbiAgb25TaGFyZUFwcE1lc3NhZ2UoKSB7XG4gICAgYXBwLnVwZGF0ZVNoYXJlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiAn5pWZ6IKy5oiQ5bCx576O5aW95pyq5p2lJyxcbiAgICAgIHBhdGg6ICcvcGFnZXMvc2VydmljZS9zZXJ2aWNlJ1xuICAgIH1cbiAgfVxufSlcbiJdfQ==