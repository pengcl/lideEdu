"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
Page({
    data: {
        subjects: [],
        subject: '',
        items: [],
        showMore: false
    },
    onShow: function () {
        var that = this;
        app.getKey(function (userInfo) {
            if (!userInfo) {
                app.globalData.showLoginPanel = true;
            }
            else {
                wx.request({
                    url: app.globalData.prefix + 'getSubjectList',
                    method: 'POST',
                    data: { key: app.globalData.userInfo.key, id: app.globalData.userInfo.typeId },
                    success: function (res) {
                        that.setData({
                            subjects: res.data.result.list,
                        });
                        that.getItems('');
                    }
                });
            }
        });
    },
    getItems: function (subjectId) {
        var that = this;
        wx.request({
            url: app.globalData.prefix + 'getVideoList',
            method: 'POST',
            data: { key: app.globalData.userInfo.key, id: app.globalData.userInfo.typeId, subjectId: subjectId },
            header: {
                'content-type': 'application/json'
            },
            success: function (res) {
                that.setData({
                    items: res.data.result.list
                });
            }
        });
    },
    selected: function (e) {
        this.setData({
            subject: e.currentTarget.dataset.item
        });
        this.getItems(e.currentTarget.dataset.item.id);
    },
    onReachBottom: function () {
        console.log('bottom');
    },
    more: function () {
        this.setData({
            showMore: !this.data.showMore
        });
    },
    showInput: function () {
        this.setData({
            inputShowed: true
        });
    },
    hideInput: function () {
        this.setData({
            inputVal: "",
            inputShowed: false
        });
    },
    clearInput: function () {
        this.setData({
            inputVal: ""
        });
    },
    inputTyping: function (e) {
        this.setData({
            inputVal: e.detail.value
        });
    },
    onShareAppMessage: function () {
        app.updateShare();
        return {
            title: '立得学堂',
            path: '/pages/course/list/list'
        };
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImxpc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSxJQUFNLEdBQUcsR0FBRyxNQUFNLEVBQVUsQ0FBQztBQUM3QixJQUFJLENBQUM7SUFDSCxJQUFJLEVBQUU7UUFDSixRQUFRLEVBQUUsRUFBRTtRQUNaLE9BQU8sRUFBRSxFQUFFO1FBQ1gsS0FBSyxFQUFFLEVBQUU7UUFDVCxRQUFRLEVBQUUsS0FBSztLQUNoQjtJQUNELE1BQU07UUFDSixJQUFNLElBQUksR0FBRyxJQUFJLENBQUM7UUFDbEIsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFDLFFBQWE7WUFDdkIsSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDYixHQUFHLENBQUMsVUFBVSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUE7YUFDckM7aUJBQU07Z0JBQ0wsRUFBRSxDQUFDLE9BQU8sQ0FBQztvQkFDVCxHQUFHLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsZ0JBQWdCO29CQUM3QyxNQUFNLEVBQUUsTUFBTTtvQkFDZCxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUU7b0JBQzlFLE9BQU8sWUFBQyxHQUFRO3dCQUNkLElBQUksQ0FBQyxPQUFRLENBQUM7NEJBQ1osUUFBUSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUk7eUJBQy9CLENBQUMsQ0FBQzt3QkFDSCxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUNwQixDQUFDO2lCQUNGLENBQUMsQ0FBQzthQUNKO1FBQ0gsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBRUQsUUFBUSxZQUFDLFNBQWM7UUFDckIsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLEVBQUUsQ0FBQyxPQUFPLENBQUM7WUFDVCxHQUFHLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsY0FBYztZQUMzQyxNQUFNLEVBQUUsTUFBTTtZQUNkLElBQUksRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFO1lBQ3BHLE1BQU0sRUFBRTtnQkFDTixjQUFjLEVBQUUsa0JBQWtCO2FBQ25DO1lBQ0QsT0FBTyxZQUFDLEdBQVE7Z0JBQ2QsSUFBSSxDQUFDLE9BQVEsQ0FBQztvQkFDWixLQUFLLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSTtpQkFDNUIsQ0FBQyxDQUFDO1lBQ0wsQ0FBQztTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxRQUFRLFlBQUMsQ0FBTTtRQUNiLElBQUksQ0FBQyxPQUFRLENBQUM7WUFDWixPQUFPLEVBQUUsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsSUFBSTtTQUN0QyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBQ0QsYUFBYTtRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDeEIsQ0FBQztJQUNELElBQUk7UUFDRixJQUFJLENBQUMsT0FBUSxDQUFDO1lBQ1osUUFBUSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRO1NBQzlCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxTQUFTO1FBQ1AsSUFBSSxDQUFDLE9BQVEsQ0FBQztZQUNaLFdBQVcsRUFBRSxJQUFJO1NBQ2xCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxTQUFTO1FBQ1AsSUFBSSxDQUFDLE9BQVEsQ0FBQztZQUNaLFFBQVEsRUFBRSxFQUFFO1lBQ1osV0FBVyxFQUFFLEtBQUs7U0FDbkIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNELFVBQVU7UUFDUixJQUFJLENBQUMsT0FBUSxDQUFDO1lBQ1osUUFBUSxFQUFFLEVBQUU7U0FDYixDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0QsV0FBVyxZQUFDLENBQU07UUFDaEIsSUFBSSxDQUFDLE9BQVEsQ0FBQztZQUNaLFFBQVEsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUs7U0FDekIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNELGlCQUFpQjtRQUNmLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNsQixPQUFPO1lBQ0wsS0FBSyxFQUFFLE1BQU07WUFDYixJQUFJLEVBQUUseUJBQXlCO1NBQ2hDLENBQUE7SUFDSCxDQUFDO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSU15QXBwIH0gZnJvbSAnLi4vLi4vLi4vLi4vYXBwJztcbmltcG9ydCB7IGZvcm1hdFRpbWUgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlsJztcbmNvbnN0IGFwcCA9IGdldEFwcDxJTXlBcHA+KCk7XG5QYWdlKHtcbiAgZGF0YToge1xuICAgIHN1YmplY3RzOiBbXSxcbiAgICBzdWJqZWN0OiAnJyxcbiAgICBpdGVtczogW10sXG4gICAgc2hvd01vcmU6IGZhbHNlXG4gIH0sXG4gIG9uU2hvdygpIHtcbiAgICBjb25zdCB0aGF0ID0gdGhpcztcbiAgICBhcHAuZ2V0S2V5KCh1c2VySW5mbzogYW55KSA9PiB7XG4gICAgICBpZiAoIXVzZXJJbmZvKSB7XG4gICAgICAgIGFwcC5nbG9iYWxEYXRhLnNob3dMb2dpblBhbmVsID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3gucmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBhcHAuZ2xvYmFsRGF0YS5wcmVmaXggKyAnZ2V0U3ViamVjdExpc3QnLCAvL+iAg+WJjei1hOaWmeWIl+ihqFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGRhdGE6IHsga2V5OiBhcHAuZ2xvYmFsRGF0YS51c2VySW5mby5rZXksIGlkOiBhcHAuZ2xvYmFsRGF0YS51c2VySW5mby50eXBlSWQgfSxcbiAgICAgICAgICBzdWNjZXNzKHJlczogYW55KSB7XG4gICAgICAgICAgICB0aGF0LnNldERhdGEhKHtcbiAgICAgICAgICAgICAgc3ViamVjdHM6IHJlcy5kYXRhLnJlc3VsdC5saXN0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LmdldEl0ZW1zKCcnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pXG4gIH0sXG5cbiAgZ2V0SXRlbXMoc3ViamVjdElkOiBhbnkpIHtcbiAgICBjb25zdCB0aGF0ID0gdGhpcztcbiAgICB3eC5yZXF1ZXN0KHtcbiAgICAgIHVybDogYXBwLmdsb2JhbERhdGEucHJlZml4ICsgJ2dldFZpZGVvTGlzdCcsIC8v6ICD5YmN6LWE5paZ5YiX6KGoXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGRhdGE6IHsga2V5OiBhcHAuZ2xvYmFsRGF0YS51c2VySW5mby5rZXksIGlkOiBhcHAuZ2xvYmFsRGF0YS51c2VySW5mby50eXBlSWQsIHN1YmplY3RJZDogc3ViamVjdElkIH0sXG4gICAgICBoZWFkZXI6IHtcbiAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyAvLyDpu5jorqTlgLxcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzKHJlczogYW55KSB7XG4gICAgICAgIHRoYXQuc2V0RGF0YSEoe1xuICAgICAgICAgIGl0ZW1zOiByZXMuZGF0YS5yZXN1bHQubGlzdFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgc2VsZWN0ZWQoZTogYW55KSB7XG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBzdWJqZWN0OiBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pdGVtXG4gICAgfSk7XG4gICAgdGhpcy5nZXRJdGVtcyhlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pdGVtLmlkKTtcbiAgfSxcbiAgb25SZWFjaEJvdHRvbSgpIHtcbiAgICBjb25zb2xlLmxvZygnYm90dG9tJyk7XG4gIH0sXG4gIG1vcmUoKSB7XG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBzaG93TW9yZTogIXRoaXMuZGF0YS5zaG93TW9yZVxuICAgIH0pO1xuICB9LFxuICBzaG93SW5wdXQoKSB7XG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBpbnB1dFNob3dlZDogdHJ1ZVxuICAgIH0pO1xuICB9LFxuICBoaWRlSW5wdXQoKSB7XG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBpbnB1dFZhbDogXCJcIixcbiAgICAgIGlucHV0U2hvd2VkOiBmYWxzZVxuICAgIH0pO1xuICB9LFxuICBjbGVhcklucHV0KCkge1xuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgaW5wdXRWYWw6IFwiXCJcbiAgICB9KTtcbiAgfSxcbiAgaW5wdXRUeXBpbmcoZTogYW55KSB7XG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBpbnB1dFZhbDogZS5kZXRhaWwudmFsdWVcbiAgICB9KTtcbiAgfSxcbiAgb25TaGFyZUFwcE1lc3NhZ2UoKSB7XG4gICAgYXBwLnVwZGF0ZVNoYXJlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiAn56uL5b6X5a2m5aCCJyxcbiAgICAgIHBhdGg6ICcvcGFnZXMvY291cnNlL2xpc3QvbGlzdCdcbiAgICB9XG4gIH1cbn0pXG4iXX0=