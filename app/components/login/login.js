"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
Component({
    attached: function () {
        var that = this;
        app.watch('showLoginPanel', function (v) {
            that.setData({
                show: v
            });
        });
    },
    properties: {
        innerText: {
            type: String,
            value: 'default value',
        }
    },
    options: {
        addGlobalClass: true
    },
    data: {
        show: app.globalData.showLoginPanel,
        someData: {}
    },
    ready: function () {
    },
    methods: {
        getPhoneNumber: function (e) {
            var that = this;
            var pages = getCurrentPages();
            var currentPage = pages[pages.length - 1];
            var options = currentPage.options;
            console.log(options);
            wx.request({
                url: app.globalData.prefix + 'initMember',
                method: 'POST',
                data: {
                    encryptedData: e.detail.encryptedData,
                    iv: e.detail.iv,
                    sessionKey: app.globalData.userInfo.sessionKey,
                    openid: app.globalData.userInfo.openId,
                    referee: options.scene ? decodeURIComponent(options.scene).split('&')[0] : ''
                },
                success: function (res) {
                    app.globalData.userInfo.typeId = options.scene ? decodeURIComponent(options.scene).split('&')[1] : '';
                    app.globalData.showLoginPanel = false;
                    if (getCurrentPages().length != 0) {
                        getCurrentPages()[getCurrentPages().length - 1].onShow();
                    }
                }
            });
        }
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJsb2dpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLElBQU0sR0FBRyxHQUFHLE1BQU0sRUFBVSxDQUFDO0FBQzdCLFNBQVMsQ0FBQztJQUNSLFFBQVEsRUFBRTtRQUNSLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixHQUFHLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFLFVBQUMsQ0FBSztZQUNoQyxJQUFJLENBQUMsT0FBUSxDQUFDO2dCQUNaLElBQUksRUFBRSxDQUFDO2FBQ1IsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0QsVUFBVSxFQUFFO1FBRVYsU0FBUyxFQUFFO1lBQ1QsSUFBSSxFQUFFLE1BQU07WUFDWixLQUFLLEVBQUUsZUFBZTtTQUN2QjtLQUNGO0lBQ0QsT0FBTyxFQUFFO1FBQ1AsY0FBYyxFQUFFLElBQUk7S0FDckI7SUFDRCxJQUFJLEVBQUU7UUFFSixJQUFJLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxjQUFjO1FBQ25DLFFBQVEsRUFBRSxFQUFFO0tBQ2I7SUFDRCxLQUFLO0lBQ0wsQ0FBQztJQUNELE9BQU8sRUFBRTtRQUVQLGNBQWMsWUFBQyxDQUFNO1lBQ25CLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQztZQUNsQixJQUFNLEtBQUssR0FBRyxlQUFlLEVBQUUsQ0FBQztZQUNoQyxJQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM1QyxJQUFNLE9BQU8sR0FBRyxXQUFXLENBQUMsT0FBTyxDQUFDO1lBQ3BDLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDckIsRUFBRSxDQUFDLE9BQU8sQ0FBQztnQkFDVCxHQUFHLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsWUFBWTtnQkFDekMsTUFBTSxFQUFFLE1BQU07Z0JBQ2QsSUFBSSxFQUFFO29CQUNKLGFBQWEsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLGFBQWE7b0JBQ3JDLEVBQUUsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUU7b0JBQ2YsVUFBVSxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLFVBQVU7b0JBQzlDLE1BQU0sRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxNQUFNO29CQUN0QyxPQUFPLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtpQkFDOUU7Z0JBQ0QsT0FBTyxZQUFDLEdBQVE7b0JBQ2QsR0FBRyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFDdEcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO29CQUN0QyxJQUFJLGVBQWUsRUFBRSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7d0JBRWpDLGVBQWUsRUFBRSxDQUFDLGVBQWUsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQTtxQkFDekQ7Z0JBQ0gsQ0FBQzthQUNGLENBQUMsQ0FBQTtRQUNKLENBQUM7S0FDRjtDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElNeUFwcCB9IGZyb20gJy4uLy4uLy4uL2FwcCc7XG5pbXBvcnQgeyBmb3JtYXRUaW1lIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbCc7XG5jb25zdCBhcHAgPSBnZXRBcHA8SU15QXBwPigpO1xuQ29tcG9uZW50KHtcbiAgYXR0YWNoZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgYXBwLndhdGNoKCdzaG93TG9naW5QYW5lbCcsICh2OmFueSkgPT4ge1xuICAgICAgdGhhdC5zZXREYXRhISh7XG4gICAgICAgIHNob3c6IHY7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcbiAgcHJvcGVydGllczoge1xuICAgIC8vIOi/memHjOWumuS5ieS6hmlubmVyVGV4dOWxnuaAp++8jOWxnuaAp+WAvOWPr+S7peWcqOe7hOS7tuS9v+eUqOaXtuaMh+WumlxuICAgIGlubmVyVGV4dDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgdmFsdWU6ICdkZWZhdWx0IHZhbHVlJyxcbiAgICB9XG4gIH0sXG4gIG9wdGlvbnM6IHtcbiAgICBhZGRHbG9iYWxDbGFzczogdHJ1ZVxuICB9LFxuICBkYXRhOiB7XG4gICAgLy8g6L+Z6YeM5piv5LiA5Lqb57uE5Lu25YaF6YOo5pWw5o2uXG4gICAgc2hvdzogYXBwLmdsb2JhbERhdGEuc2hvd0xvZ2luUGFuZWwsXG4gICAgc29tZURhdGE6IHt9XG4gIH0sXG4gIHJlYWR5KCkge1xuICB9LFxuICBtZXRob2RzOiB7XG4gICAgLy8g6L+Z6YeM5piv5LiA5Liq6Ieq5a6a5LmJ5pa55rOVXG4gICAgZ2V0UGhvbmVOdW1iZXIoZTogYW55KSB7XG4gICAgICBjb25zdCB0aGF0ID0gdGhpcztcbiAgICAgIGNvbnN0IHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCk7XG4gICAgICBjb25zdCBjdXJyZW50UGFnZSA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IGN1cnJlbnRQYWdlLm9wdGlvbnM7XG4gICAgICBjb25zb2xlLmxvZyhvcHRpb25zKTtcbiAgICAgIHd4LnJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGFwcC5nbG9iYWxEYXRhLnByZWZpeCArICdpbml0TWVtYmVyJywgLy/ojrflj5bpobnnm67liJfooahcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBlbmNyeXB0ZWREYXRhOiBlLmRldGFpbC5lbmNyeXB0ZWREYXRhLFxuICAgICAgICAgIGl2OiBlLmRldGFpbC5pdixcbiAgICAgICAgICBzZXNzaW9uS2V5OiBhcHAuZ2xvYmFsRGF0YS51c2VySW5mby5zZXNzaW9uS2V5LFxuICAgICAgICAgIG9wZW5pZDogYXBwLmdsb2JhbERhdGEudXNlckluZm8ub3BlbklkLFxuICAgICAgICAgIHJlZmVyZWU6IG9wdGlvbnMuc2NlbmUgPyBkZWNvZGVVUklDb21wb25lbnQob3B0aW9ucy5zY2VuZSkuc3BsaXQoJyYnKVswXSA6ICcnXG4gICAgICAgIH0sXG4gICAgICAgIHN1Y2Nlc3MocmVzOiBhbnkpIHtcbiAgICAgICAgICBhcHAuZ2xvYmFsRGF0YS51c2VySW5mby50eXBlSWQgPSBvcHRpb25zLnNjZW5lID8gZGVjb2RlVVJJQ29tcG9uZW50KG9wdGlvbnMuc2NlbmUpLnNwbGl0KCcmJylbMV0gOiAnJztcbiAgICAgICAgICBhcHAuZ2xvYmFsRGF0YS5zaG93TG9naW5QYW5lbCA9IGZhbHNlO1xuICAgICAgICAgIGlmIChnZXRDdXJyZW50UGFnZXMoKS5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgLy/liLfmlrDlvZPliY3pobXpnaLnmoTmlbDmja5cbiAgICAgICAgICAgIGdldEN1cnJlbnRQYWdlcygpW2dldEN1cnJlbnRQYWdlcygpLmxlbmd0aCAtIDFdLm9uU2hvdygpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufSkiXX0=